name: compile-and-run
on: [push]

jobs:
  check-versions:
    env:
      build_folder_location: build
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
#      - name: Use GCC 10 instead
#        run: sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-10 60 --slave /usr/bin/g++ g++ /usr/bin/g++-10
      - run: sudo apt-get install ninja-build
      - run: gcc --version && g++ --version && ninja --version
      - name: Setup build
        run: |
            mkdir -p ${{ env.build_folder_location }}
            cd ${{ env.build_folder_location }}
            cmake .. -G Ninja -DCMAKE_C_COMPILER=gcc-10 -DCMAKE_CXX_COMPILER=g++-10
      - name: Build
        run: |
            cd ${{ env.build_folder_location }}
            cmake --build .
      - name: Run
        run: |
            cd ${{ env.build_folder_location }}
            ./ActionsTest
